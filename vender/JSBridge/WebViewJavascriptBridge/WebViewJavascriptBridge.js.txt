(function(){if(window.WebViewJavascriptBridge){return}var b;var i=[];var p=[];var g={};var d="wvjbscheme";var a="__WVJB_QUEUE_MESSAGE__";var c={};var k=1;function r(t){b=t.createElement("iframe");b.style.display="none";b.src=d+"://"+a;t.documentElement.appendChild(b)}function o(v){if(WebViewJavascriptBridge._messageHandler){throw new Error("WebViewJavascriptBridge.init called twice")}WebViewJavascriptBridge._messageHandler=v;var t=p;p=null;for(var u=0;u<t.length;u++){q(t[u])}}function h(u,t){m({data:u},t)}function f(t,u){g[t]=u}function e(t,v,u){m({handlerName:t,data:v},u)}function m(u,t){if(t){var v="cb_"+(k++)+"_"+new Date().getTime();c[v]=t;u["callbackId"]=v}i.push(u);b.src=d+"://"+a}function j(){var t=JSON.stringify(i);i=[];return t}function q(t){setTimeout(function u(){var z=JSON.parse(t);var y;var x;if(z.responseId){x=c[z.responseId];if(!x){return}x(z.responseData);delete c[z.responseId]}else{if(z.callbackId){var A=z.callbackId;x=function(B){m({responseId:A,responseData:B})}}var w=WebViewJavascriptBridge._messageHandler;if(z.handlerName){w=g[z.handlerName]}try{w(z.data,x)}catch(v){if(typeof console!="undefined"){console.log("WebViewJavascriptBridge: WARNING: javascript handler threw.",z,v)}}}})}function n(t){if(p){p.push(t)}else{q(t)}}window.WebViewJavascriptBridge={init:o,send:h,registerHandler:f,callHandler:e,_fetchQueue:j,_handleMessageFromObjC:n};var s=document;r(s);var l=s.createEvent("Events");l.initEvent("WebViewJavascriptBridgeReady");l.bridge=WebViewJavascriptBridge;s.dispatchEvent(l)})();